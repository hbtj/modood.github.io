『Go 语法基础』之函数
=====================

Table of contents
-----------------

*   [声明](#声明)
*   [方法](#方法)
*   [接口](#接口)
*   [参数](#参数)
*   [返回值](#返回值)
*   [匿名函数](#匿名函数)
*   [内建函数](#内建函数)

## 声明

声明一个函数：

```go
func add(x, y int) int {
  return x + y
}
```

函数声明可省略函数体。这样的标识符为Go外部实现的函数提供签名，例如汇编例程。

```go
func flushICache(begin, end uintptr)
```

## 方法

函数定义时指定一个类型作为方法接收者：

```go
type Book struct {
  Name  string
  Price int
}

func (b *Book) Rise(value int) {
  b.Price += value
}
```

## 接口

接口类型是由一组方法定义的集合。

```go
type error interface {
    Error() string
}
```

## 参数

1.  当两个或多个连续的函数命名参数是同一类型，则除了最后一个类型之外其他都可以省略。
2.  函数最后一个形参可能是一个带 ... 前缀的类型，带这样形参的函数被称为变参函数。

## 返回值

1.  函数可以返回任意数量的返回值。
2.  返回值可以被命名，就像在函数体开头声明的变量一样。没有参数的 return 语句返回各个返回变量的当前值。
3.  只返回一个值并且未命名的话，可以不加括号。

## 匿名函数

1.  函数可以不命名。
2.  函数也是值。他们可以像其他值一样传递，可以作为函数的参数或者返回值。
3.  函数可以形成闭包。闭包是一个函数值，它引用了函数体之外的变量，可以对这些变量进行访问和赋值。

## 内建函数

```
cap                 获取容量（数组，切片，信道缓存）
len                 获取长度（数组，切片，信道缓存中元素，映射，字符串）

make                分配内存并初始化（返回类型，适用于切片，映射，信道）
new                 分配内存（返回指针，适用于结构体）

panic               引发恐慌（终止程序执行）
recover             停止恐慌（恢复执行，必须在 defer 中调用）

complex             构造复数
imag                提取复数的实部
real                提取复数的虚部

close               关闭信道

append              切片追加
copy                切片复制

delete              映射删除元素
```
